# NOTE

1.计算公式：
DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);
DEA:EMA(DIF,MID);
MACD:(DIF-DEA)*2;
2.可变参数说明：
上式中，SHORT、LONG、MID是可变参数，三个参数都是EMA公式中α的取值（EMA计算公式在前文有介绍）。通常情况下，业内公认的三个取值为：12，26，9。
3.初始化说明：
通常DIF,DEA,MACD的初始值用0补足。不过这个0并不是刻意补上去的，而是根据EMA初始化规则，自然而然算出来的DIF,DEA,MACD初始值都为0。

EMA（Exponential Moving Average），指数平均数指标。也叫EXPMA指标，它也是一种趋向类指标，指数平均数指标是以指数式递减加权的移动平均。
1.计算公式：
EMAtoday=α * Pricetoday + ( 1 - α ) * EMAyesterday；
2.可变参数说明：
α为平滑指数，一般取作2/(N+1)。在计算MACD指标时，EMA计算中的N一般选取12和26天，因此α相应为2/13和2/27；在计算DEA时，EMA中的N一般选取为9天，即α为2/10。
3.初始化说明：
EMA1是没有定义的，通常情况下取EMA1为Price1，即数据的第一项填充为EMA的第一项。


比如一家公司的过去11天PE估值分别为：2.1、1.1、9.1、5.1、4.1、11.1、8.1、10.1、6.1、7.1、9.1，共11个样本点，而今天这家公司的PE的估值是3.1，也就是第12个样本点。接下来就算一下今天PE估值3.1在12个样本中的位置，也就是分位点是多少。

第一步，剔除重复的数据，只保留一个。对于该例子来说，也就是只保留一个9.1，这时就剩下11个样本点，届时3.1的真实排位就是11。

第二步，把11个样本点，按从小到大的顺序排列，这时3.1就从第11位排到第3位了。

第三步，计算3.1的百分位，公式是(3 - 1) / (11 - 1) = 20%，其中的1、3、11都是排位。

注意：分位点计算要减1，这样才能满足0%到100%的排序，不然第1位1.1的分位点就是1/11=9.1%，实际分位点是0%；同理如果当前值是11.1，那么分位点就是100%
